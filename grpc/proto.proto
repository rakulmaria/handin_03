syntax = "proto3";

package Handin_03;

option go_package = "grpc/proto";

message ChatMessage{
    int64 clientId = 1;
    string message = 2;
    string timestamp = 3;
}

message Client{
    int64 id = 1;
    string name = 2;
}

message Connect{
    Client client = 1;
    bool active = 2;
}

message Empty{}


service ChittyChat{
    rpc JoinChat(Connect) returns (stream ChatMessage){}
    rpc Publish(ChatMessage) returns (Empty){}
    rpc LeaveChat(Connect) returns (stream ChatMessage){}
}


//protoc --go_out=. --go_opt=paths=source_relative --go-grpc_out=. --go-grpc_opt=paths=source_relative grpc/proto.proto  

